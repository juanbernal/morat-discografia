commit 7665093239df7e62fafc6d3ec73d3746bbf470bd
Author: juanbernal <redimidoxd@gmail.com>
Date:   Sat Feb 28 12:49:20 2026 -0600

    fix(catalog): revert to rich offline mock data to solve spotify api credential blocking and broken images

diff --git a/src/services/spotifyService.ts b/src/services/spotifyService.ts
index d4a61cd..310385e 100644
--- a/src/services/spotifyService.ts
+++ b/src/services/spotifyService.ts
@@ -1,115 +1,124 @@
 import type { Album, Artist, Track, SimplifiedTrack } from '../types';
 
-const CLIENT_ID = process.env.SPOTIFY_CLIENT_ID;
-const CLIENT_SECRET = process.env.SPOTIFY_CLIENT_SECRET;
-
-let accessToken: string | null = null;
-let tokenExpiry: number = 0;
-
-const getAccessToken = async (): Promise<string | null> => {
-    if (accessToken && Date.now() < tokenExpiry) {
-        return accessToken;
-    }
-
-    if (!CLIENT_ID || !CLIENT_SECRET) {
-        console.warn("Spotify credentials missing in environment variables.");
-        return null;
-    }
-
-    try {
-        const response = await fetch("https://accounts.spotify.com/api/token", {
-            method: "POST",
-            headers: {
-                "Content-Type": "application/x-www-form-urlencoded",
-                "Authorization": "Basic " + btoa(CLIENT_ID + ":" + CLIENT_SECRET),
-            },
-            body: "grant_type=client_credentials",
-        });
-
-        if (!response.ok) throw new Error("Failed to get Spotify access token");
-
-        const data = await response.json();
-        accessToken = data.access_token;
-        tokenExpiry = Date.now() + (data.expires_in * 1000) - 60000; // 1 minute buffer
-        return accessToken;
-    } catch (error) {
-        console.error("Error fetching Spotify access token:", error);
-        return null;
-    }
-};
-
-const fetchSpotify = async <T>(endpoint: string): Promise<T | null> => {
-    const token = await getAccessToken();
-    if (!token) return null;
-
-    try {
-        const response = await fetch(`https://api.spotify.com/v1/${endpoint}`, {
-            headers: { "Authorization": `Bearer ${token}` }
-        });
-        if (!response.ok) {
-            if (response.status === 401) {
-                accessToken = null; // Force token refresh on next call
+interface SpotifyStaticData {
+    artist: Artist;
+    topTracks: Track[];
+    albums: Album[];
+    albumTracks: Record<string, SimplifiedTrack[]>;
+    lastUpdated: string;
+}
+
+const STATIC_DATA: Record<string, SpotifyStaticData> = {
+    "2mEoedcjDJ7x6SCVLMI4Do": {
+        artist: {
+            id: "2mEoedcjDJ7x6SCVLMI4Do",
+            name: "Diosmasgym",
+            external_urls: { spotify: "https://open.spotify.com/artist/2mEoedcjDJ7x6SCVLMI4Do" },
+            images: [{ url: "https://i.scdn.co/image/ab6761610000e5eb270a4a833d7b43baefe11854", height: 640, width: 640 }]
+        },
+        topTracks: [
+            {
+                id: "track_d1",
+                name: "Hagamos Historia",
+                album: {
+                    id: "album_d1",
+                    name: "Hagamos Historia",
+                    images: [{ url: "https://i.scdn.co/image/ab67616d0000b27362a720028153e14b1ec91c48", height: 640, width: 640 }],
+                    release_date: "2024-01-01",
+                    total_tracks: 1,
+                    external_urls: { spotify: "https://open.spotify.com/artist/2mEoedcjDJ7x6SCVLMI4Do" },
+                    artists: [{ id: "2mEoedcjDJ7x6SCVLMI4Do", name: "Diosmasgym", external_urls: { spotify: "" } }],
+                    album_type: "single",
+                    source: "merged"
+                },
+                artists: [{ id: "2mEoedcjDJ7x6SCVLMI4Do", name: "Diosmasgym", external_urls: { spotify: "" } }],
+                duration_ms: 180000,
+                explicit: false,
+                external_urls: { spotify: "https://open.spotify.com/artist/2mEoedcjDJ7x6SCVLMI4Do" },
+                preview_url: "",
+                source: "merged"
             }
-            throw new Error(`Spotify API error: ${response.status}`);
-        }
-        return response.json();
-    } catch (error) {
-        console.error(`Error fetching from Spotify endpoint ${endpoint}:`, error);
-        return null;
+        ],
+        albums: [
+            {
+                id: "album_d1",
+                name: "Hagamos Historia",
+                images: [{ url: "https://i.scdn.co/image/ab67616d0000b27362a720028153e14b1ec91c48", height: 640, width: 640 }],
+                release_date: "2024-01-01",
+                total_tracks: 1,
+                external_urls: { spotify: "https://open.spotify.com/artist/2mEoedcjDJ7x6SCVLMI4Do" },
+                artists: [{ id: "2mEoedcjDJ7x6SCVLMI4Do", name: "Diosmasgym", external_urls: { spotify: "" } }],
+                album_type: "single",
+                source: "merged"
+            }
+        ],
+        albumTracks: {},
+        lastUpdated: new Date().toISOString()
+    },
+    "0vEKa5AOcBkQVXNfGb2FNh": {
+        artist: {
+            id: "0vEKa5AOcBkQVXNfGb2FNh",
+            name: "Juan 614",
+            external_urls: { spotify: "https://open.spotify.com/artist/0vEKa5AOcBkQVXNfGb2FNh" },
+            images: [{ url: "https://i.scdn.co/image/ab6761610000e5eb270a4a833d7b43baefe11854", height: 640, width: 640 }]
+        },
+        topTracks: [
+            {
+                id: "track_j1",
+                name: "Juan 614 Hit",
+                album: {
+                    id: "album_j1",
+                    name: "Sencillo 614",
+                    images: [{ url: "https://i.scdn.co/image/ab6761610000e5eb270a4a833d7b43baefe11854", height: 640, width: 640 }],
+                    release_date: "2024-02-01",
+                    total_tracks: 1,
+                    external_urls: { spotify: "https://open.spotify.com/artist/0vEKa5AOcBkQVXNfGb2FNh" },
+                    artists: [{ id: "0vEKa5AOcBkQVXNfGb2FNh", name: "Juan 614", external_urls: { spotify: "" } }],
+                    album_type: "single",
+                    source: "merged"
+                },
+                artists: [{ id: "0vEKa5AOcBkQVXNfGb2FNh", name: "Juan 614", external_urls: { spotify: "" } }],
+                duration_ms: 200000,
+                explicit: false,
+                external_urls: { spotify: "https://open.spotify.com/artist/0vEKa5AOcBkQVXNfGb2FNh" },
+                preview_url: "",
+                source: "merged"
+            }
+        ],
+        albums: [
+            {
+                id: "album_j1",
+                name: "Sencillo 614",
+                images: [{ url: "https://i.scdn.co/image/ab6761610000e5eb270a4a833d7b43baefe11854", height: 640, width: 640 }],
+                release_date: "2024-02-01",
+                total_tracks: 1,
+                external_urls: { spotify: "https://open.spotify.com/artist/0vEKa5AOcBkQVXNfGb2FNh" },
+                artists: [{ id: "0vEKa5AOcBkQVXNfGb2FNh", name: "Juan 614", external_urls: { spotify: "" } }],
+                album_type: "single",
+                source: "merged"
+            }
+        ],
+        albumTracks: {},
+        lastUpdated: new Date().toISOString()
     }
 };
 
 export const getArtistDetails = async (artistId: string): Promise<Artist | null> => {
-    return fetchSpotify<Artist>(`artists/${artistId}`);
+    return STATIC_DATA[artistId]?.artist || null;
 };
 
 export const getArtistTopTracks = async (artistId: string): Promise<Track[]> => {
-    try {
-        const data = await fetchSpotify<{ tracks: Track[] }>(`artists/${artistId}/top-tracks?market=US`);
-        let tracks = data?.tracks || [];
-
-        // Fallback: if no top tracks, fetch tracks from the most recent album
-        if (tracks.length === 0) {
-            console.log(`No top tracks for ${artistId}, fetching from recent albums...`);
-            const albums = await getArtistAlbums(artistId);
-            if (albums.length > 0) {
-                const recentAlbum = albums[0];
-                const albumTracks = await getAlbumTracks(recentAlbum.id);
-                tracks = albumTracks.map(st => ({
-                    ...st,
-                    album: recentAlbum,
-                    source: 'spotify' as const
-                }));
-            }
-        }
-
-        return tracks;
-    } catch (error) {
-        console.error(`Error in getArtistTopTracks for ${artistId}:`, error);
-        return [];
-    }
+    return STATIC_DATA[artistId]?.topTracks || [];
 };
 
 export const getArtistAlbums = async (artistId: string): Promise<Album[]> => {
-    let allAlbums: Album[] = [];
-    let url = `artists/${artistId}/albums?include_groups=album,single&limit=50`;
-
-    try {
-        const data = await fetchSpotify<{ items: Album[], next: string | null }>(url);
-        if (data) {
-            allAlbums = data.items.map(album => ({
-                ...album,
-                source: 'spotify' as const
-            }));
-        }
-    } catch (error) {
-        console.error("Error fetching artist albums:", error);
-    }
-
-    return allAlbums;
+    return STATIC_DATA[artistId]?.albums || [];
 };
 
 export const getAlbumTracks = async (albumId: string): Promise<SimplifiedTrack[]> => {
-    const data = await fetchSpotify<{ items: SimplifiedTrack[] }>(`albums/${albumId}/tracks?limit=50`);
-    return data?.items || [];
+    // We iterate through all artists to find the album tracks if needed in the future
+    for (const data of Object.values(STATIC_DATA)) {
+        if (data.albumTracks[albumId]) return data.albumTracks[albumId];
+    }
+    return [];
 };

commit 337185108896477b5fbbe94fd798f10a80f8c652
Author: juanbernal <redimidoxd@gmail.com>
Date:   Sat Feb 28 12:35:10 2026 -0600

    feat(api): restore automated spotify api fetching for full catalog sync

diff --git a/src/services/spotifyService.ts b/src/services/spotifyService.ts
index ea17b91..d4a61cd 100644
--- a/src/services/spotifyService.ts
+++ b/src/services/spotifyService.ts
@@ -1,43 +1,115 @@
 import type { Album, Artist, Track, SimplifiedTrack } from '../types';
 
-interface SpotifyStaticData {
-    artist: Artist;
-    topTracks: Track[];
-    albums: Album[];
-    albumTracks: Record<string, SimplifiedTrack[]>;
-    lastUpdated: string;
-}
-
-const STATIC_DATA: SpotifyStaticData = {
-    artist: {
-        id: "2mEoedcjDJ7x6SCVLMI4Do",
-        name: "Diosmasgym",
-        external_urls: { spotify: "https://open.spotify.com/artist/2mEoedcjDJ7x6SCVLMI4Do" },
-        images: [{ url: "https://picsum.photos/600/600", height: 600, width: 600 }]
-    },
-    topTracks: [],
-    albums: [],
-    albumTracks: {},
-    lastUpdated: "2024-01-01T00:00:00.000Z"
+const CLIENT_ID = process.env.SPOTIFY_CLIENT_ID;
+const CLIENT_SECRET = process.env.SPOTIFY_CLIENT_SECRET;
+
+let accessToken: string | null = null;
+let tokenExpiry: number = 0;
+
+const getAccessToken = async (): Promise<string | null> => {
+    if (accessToken && Date.now() < tokenExpiry) {
+        return accessToken;
+    }
+
+    if (!CLIENT_ID || !CLIENT_SECRET) {
+        console.warn("Spotify credentials missing in environment variables.");
+        return null;
+    }
+
+    try {
+        const response = await fetch("https://accounts.spotify.com/api/token", {
+            method: "POST",
+            headers: {
+                "Content-Type": "application/x-www-form-urlencoded",
+                "Authorization": "Basic " + btoa(CLIENT_ID + ":" + CLIENT_SECRET),
+            },
+            body: "grant_type=client_credentials",
+        });
+
+        if (!response.ok) throw new Error("Failed to get Spotify access token");
+
+        const data = await response.json();
+        accessToken = data.access_token;
+        tokenExpiry = Date.now() + (data.expires_in * 1000) - 60000; // 1 minute buffer
+        return accessToken;
+    } catch (error) {
+        console.error("Error fetching Spotify access token:", error);
+        return null;
+    }
+};
+
+const fetchSpotify = async <T>(endpoint: string): Promise<T | null> => {
+    const token = await getAccessToken();
+    if (!token) return null;
+
+    try {
+        const response = await fetch(`https://api.spotify.com/v1/${endpoint}`, {
+            headers: { "Authorization": `Bearer ${token}` }
+        });
+        if (!response.ok) {
+            if (response.status === 401) {
+                accessToken = null; // Force token refresh on next call
+            }
+            throw new Error(`Spotify API error: ${response.status}`);
+        }
+        return response.json();
+    } catch (error) {
+        console.error(`Error fetching from Spotify endpoint ${endpoint}:`, error);
+        return null;
+    }
 };
 
 export const getArtistDetails = async (artistId: string): Promise<Artist | null> => {
-    if (STATIC_DATA.artist.id === artistId) return STATIC_DATA.artist;
-    return null;
+    return fetchSpotify<Artist>(`artists/${artistId}`);
 };
 
 export const getArtistTopTracks = async (artistId: string): Promise<Track[]> => {
-    if (STATIC_DATA.artist.id === artistId) return STATIC_DATA.topTracks;
-    return [];
+    try {
+        const data = await fetchSpotify<{ tracks: Track[] }>(`artists/${artistId}/top-tracks?market=US`);
+        let tracks = data?.tracks || [];
+
+        // Fallback: if no top tracks, fetch tracks from the most recent album
+        if (tracks.length === 0) {
+            console.log(`No top tracks for ${artistId}, fetching from recent albums...`);
+            const albums = await getArtistAlbums(artistId);
+            if (albums.length > 0) {
+                const recentAlbum = albums[0];
+                const albumTracks = await getAlbumTracks(recentAlbum.id);
+                tracks = albumTracks.map(st => ({
+                    ...st,
+                    album: recentAlbum,
+                    source: 'spotify' as const
+                }));
+            }
+        }
+
+        return tracks;
+    } catch (error) {
+        console.error(`Error in getArtistTopTracks for ${artistId}:`, error);
+        return [];
+    }
 };
 
 export const getArtistAlbums = async (artistId: string): Promise<Album[]> => {
-    return STATIC_DATA.albums.filter(a => a.artists.some(art => art.id === artistId));
+    let allAlbums: Album[] = [];
+    let url = `artists/${artistId}/albums?include_groups=album,single&limit=50`;
+
+    try {
+        const data = await fetchSpotify<{ items: Album[], next: string | null }>(url);
+        if (data) {
+            allAlbums = data.items.map(album => ({
+                ...album,
+                source: 'spotify' as const
+            }));
+        }
+    } catch (error) {
+        console.error("Error fetching artist albums:", error);
+    }
+
+    return allAlbums;
 };
 
 export const getAlbumTracks = async (albumId: string): Promise<SimplifiedTrack[]> => {
-    if (STATIC_DATA.albumTracks && STATIC_DATA.albumTracks[albumId]) {
-        return STATIC_DATA.albumTracks[albumId];
-    }
-    return [];
+    const data = await fetchSpotify<{ items: SimplifiedTrack[] }>(`albums/${albumId}/tracks?limit=50`);
+    return data?.items || [];
 };

commit e1d95e3140127f374260796f88625a73ae9218d7
Author: juanbernal <redimidoxd@gmail.com>
Date:   Sat Feb 28 12:16:00 2026 -0600

    fix(services): apply offline data in src/services and fix build component imports

diff --git a/src/services/spotifyService.ts b/src/services/spotifyService.ts
index ffd19d8..ea17b91 100644
--- a/src/services/spotifyService.ts
+++ b/src/services/spotifyService.ts
@@ -1,116 +1,43 @@
-
 import type { Album, Artist, Track, SimplifiedTrack } from '../types';
 
-const CLIENT_ID = process.env.SPOTIFY_CLIENT_ID;
-const CLIENT_SECRET = process.env.SPOTIFY_CLIENT_SECRET;
-
-let accessToken: string | null = null;
-let tokenExpiry: number = 0;
-
-const getAccessToken = async (): Promise<string | null> => {
-    if (accessToken && Date.now() < tokenExpiry) {
-        return accessToken;
-    }
-
-    if (!CLIENT_ID || !CLIENT_SECRET) {
-        console.warn("Spotify credentials missing in environment variables.");
-        return null;
-    }
-
-    try {
-        const response = await fetch("https://accounts.spotify.com/api/token", {
-            method: "POST",
-            headers: {
-                "Content-Type": "application/x-www-form-urlencoded",
-                "Authorization": "Basic " + btoa(CLIENT_ID + ":" + CLIENT_SECRET),
-            },
-            body: "grant_type=client_credentials",
-        });
-
-        if (!response.ok) throw new Error("Failed to get Spotify access token");
-        
-        const data = await response.json();
-        accessToken = data.access_token;
-        tokenExpiry = Date.now() + (data.expires_in * 1000) - 60000; // 1 minute buffer
-        return accessToken;
-    } catch (error) {
-        console.error("Error fetching Spotify access token:", error);
-        return null;
-    }
-};
-
-const fetchSpotify = async <T>(endpoint: string): Promise<T | null> => {
-    const token = await getAccessToken();
-    if (!token) return null;
-
-    try {
-        const response = await fetch(`https://api.spotify.com/v1/${endpoint}`, {
-            headers: { "Authorization": `Bearer ${token}` }
-        });
-        if (!response.ok) {
-            if (response.status === 401) {
-                accessToken = null; // Force token refresh on next call
-            }
-            throw new Error(`Spotify API error: ${response.status}`);
-        }
-        return response.json();
-    } catch (error) {
-        console.error(`Error fetching from Spotify endpoint ${endpoint}:`, error);
-        return null;
-    }
+interface SpotifyStaticData {
+    artist: Artist;
+    topTracks: Track[];
+    albums: Album[];
+    albumTracks: Record<string, SimplifiedTrack[]>;
+    lastUpdated: string;
+}
+
+const STATIC_DATA: SpotifyStaticData = {
+    artist: {
+        id: "2mEoedcjDJ7x6SCVLMI4Do",
+        name: "Diosmasgym",
+        external_urls: { spotify: "https://open.spotify.com/artist/2mEoedcjDJ7x6SCVLMI4Do" },
+        images: [{ url: "https://picsum.photos/600/600", height: 600, width: 600 }]
+    },
+    topTracks: [],
+    albums: [],
+    albumTracks: {},
+    lastUpdated: "2024-01-01T00:00:00.000Z"
 };
 
 export const getArtistDetails = async (artistId: string): Promise<Artist | null> => {
-    return fetchSpotify<Artist>(`artists/${artistId}`);
+    if (STATIC_DATA.artist.id === artistId) return STATIC_DATA.artist;
+    return null;
 };
 
 export const getArtistTopTracks = async (artistId: string): Promise<Track[]> => {
-    try {
-        const data = await fetchSpotify<{ tracks: Track[] }>(`artists/${artistId}/top-tracks?market=US`);
-        let tracks = data?.tracks || [];
-        
-        // Fallback: if no top tracks, fetch tracks from the most recent album
-        if (tracks.length === 0) {
-            console.log(`No top tracks for ${artistId}, fetching from recent albums...`);
-            const albums = await getArtistAlbums(artistId);
-            if (albums.length > 0) {
-                const recentAlbum = albums[0];
-                const albumTracks = await getAlbumTracks(recentAlbum.id);
-                tracks = albumTracks.map(st => ({
-                    ...st,
-                    album: recentAlbum,
-                    source: 'spotify' as const
-                }));
-            }
-        }
-        
-        return tracks;
-    } catch (error) {
-        console.error(`Error in getArtistTopTracks for ${artistId}:`, error);
-        return [];
-    }
+    if (STATIC_DATA.artist.id === artistId) return STATIC_DATA.topTracks;
+    return [];
 };
 
 export const getArtistAlbums = async (artistId: string): Promise<Album[]> => {
-    let allAlbums: Album[] = [];
-    let url = `artists/${artistId}/albums?include_groups=album,single&limit=50`;
-    
-    try {
-        const data = await fetchSpotify<{ items: Album[], next: string | null }>(url);
-        if (data) {
-            allAlbums = data.items.map(album => ({
-                ...album,
-                source: 'spotify' as const
-            }));
-        }
-    } catch (error) {
-        console.error("Error fetching artist albums:", error);
-    }
-    
-    return allAlbums;
+    return STATIC_DATA.albums.filter(a => a.artists.some(art => art.id === artistId));
 };
 
 export const getAlbumTracks = async (albumId: string): Promise<SimplifiedTrack[]> => {
-    const data = await fetchSpotify<{ items: SimplifiedTrack[] }>(`albums/${albumId}/tracks?limit=50`);
-    return data?.items || [];
+    if (STATIC_DATA.albumTracks && STATIC_DATA.albumTracks[albumId]) {
+        return STATIC_DATA.albumTracks[albumId];
+    }
+    return [];
 };

commit c25fa91c91d163a926e7215a1f231360cad100a2
Author: juanbernal <redimidoxd@gmail.com>
Date:   Sat Feb 28 00:20:27 2026 -0600

    Fix build workflow and environment variables

diff --git a/src/services/spotifyService.ts b/src/services/spotifyService.ts
index e47aeaf..ffd19d8 100644
--- a/src/services/spotifyService.ts
+++ b/src/services/spotifyService.ts
@@ -1,8 +1,8 @@
 
 import type { Album, Artist, Track, SimplifiedTrack } from '../types';
 
-const CLIENT_ID = import.meta.env.VITE_SPOTIFY_CLIENT_ID;
-const CLIENT_SECRET = import.meta.env.VITE_SPOTIFY_CLIENT_SECRET;
+const CLIENT_ID = process.env.SPOTIFY_CLIENT_ID;
+const CLIENT_SECRET = process.env.SPOTIFY_CLIENT_SECRET;
 
 let accessToken: string | null = null;
 let tokenExpiry: number = 0;

commit 76f739f3b8ce50c43e2b7a8bd24feba6165f8b46
Author: juanbernal <redimidoxd@gmail.com>
Date:   Sat Feb 28 00:09:06 2026 -0600

    Descripci├│n de mis cambios

diff --git a/src/services/spotifyService.ts b/src/services/spotifyService.ts
index fbb211d..e47aeaf 100644
--- a/src/services/spotifyService.ts
+++ b/src/services/spotifyService.ts
@@ -1,25 +1,21 @@
 
 import type { Album, Artist, Track, SimplifiedTrack } from '../types';
 
-const CLIENT_ID = process.env.SPOTIFY_CLIENT_ID || (import.meta as any).env?.VITE_SPOTIFY_CLIENT_ID;
-const CLIENT_SECRET = process.env.SPOTIFY_CLIENT_SECRET || (import.meta as any).env?.VITE_SPOTIFY_CLIENT_SECRET;
+const CLIENT_ID = import.meta.env.VITE_SPOTIFY_CLIENT_ID;
+const CLIENT_SECRET = import.meta.env.VITE_SPOTIFY_CLIENT_SECRET;
 
 let accessToken: string | null = null;
 let tokenExpiry: number = 0;
 
-const getAccessToken = async () => {
+const getAccessToken = async (): Promise<string | null> => {
     if (accessToken && Date.now() < tokenExpiry) {
         return accessToken;
     }
 
-    console.log("Spotify: Attempting to get access token...");
     if (!CLIENT_ID || !CLIENT_SECRET) {
-        console.error("Spotify: Credentials missing. Check SPOTIFY_CLIENT_ID and SPOTIFY_CLIENT_SECRET in environment.");
-        console.log("Spotify: process.env.SPOTIFY_CLIENT_ID is:", process.env.SPOTIFY_CLIENT_ID ? "Defined" : "Undefined");
+        console.warn("Spotify credentials missing in environment variables.");
         return null;
     }
-    
-    console.log(`Spotify: Using Client ID starting with: ${CLIENT_ID.substring(0, 4)}...`);
 
     try {
         const response = await fetch("https://accounts.spotify.com/api/token", {
@@ -31,85 +27,90 @@ const getAccessToken = async () => {
             body: "grant_type=client_credentials",
         });
 
-        if (!response.ok) {
-            const errorData = await response.text();
-            console.error(`Spotify: Token request failed (${response.status}):`, errorData);
-            return null;
-        }
-
+        if (!response.ok) throw new Error("Failed to get Spotify access token");
+        
         const data = await response.json();
         accessToken = data.access_token;
-        tokenExpiry = Date.now() + (data.expires_in * 1000);
-        console.log("Spotify: Access token obtained successfully.");
+        tokenExpiry = Date.now() + (data.expires_in * 1000) - 60000; // 1 minute buffer
         return accessToken;
     } catch (error) {
-        console.error("Spotify: Error getting access token (possibly CORS):", error);
+        console.error("Error fetching Spotify access token:", error);
         return null;
     }
 };
 
-const fetchSpotify = async (url: string) => {
+const fetchSpotify = async <T>(endpoint: string): Promise<T | null> => {
     const token = await getAccessToken();
-    if (!token) {
-        console.error(`Spotify: No token available for request to ${url}`);
-        return null;
-    }
+    if (!token) return null;
 
     try {
-        const response = await fetch(url, {
-            headers: {
-                "Authorization": `Bearer ${token}`,
-            },
+        const response = await fetch(`https://api.spotify.com/v1/${endpoint}`, {
+            headers: { "Authorization": `Bearer ${token}` }
         });
-        
-        if (response.status === 429) {
-            console.warn("Spotify: Rate limit exceeded. Try again later.");
-            return null;
-        }
-
         if (!response.ok) {
-            const errorText = await response.text();
-            console.error(`Spotify: API request failed (${response.status}) for ${url}. Error: ${errorText}`);
-            return null;
+            if (response.status === 401) {
+                accessToken = null; // Force token refresh on next call
+            }
+            throw new Error(`Spotify API error: ${response.status}`);
         }
-
-        const contentType = response.headers.get("content-type");
-        if (!contentType || !contentType.includes("application/json")) {
-            console.error(`Spotify: Expected JSON response but got ${contentType} from ${url}`);
-            return null;
-        }
-
-        return await response.json();
+        return response.json();
     } catch (error) {
-        console.error(`Spotify: Error fetching from ${url}:`, error);
+        console.error(`Error fetching from Spotify endpoint ${endpoint}:`, error);
         return null;
     }
 };
 
 export const getArtistDetails = async (artistId: string): Promise<Artist | null> => {
-    return await fetchSpotify(`https://api.spotify.com/v1/artists/${artistId}`);
+    return fetchSpotify<Artist>(`artists/${artistId}`);
 };
 
 export const getArtistTopTracks = async (artistId: string): Promise<Track[]> => {
-    const data = await fetchSpotify(`https://api.spotify.com/v1/artists/${artistId}/top-tracks?market=US`);
-    return data?.tracks || [];
+    try {
+        const data = await fetchSpotify<{ tracks: Track[] }>(`artists/${artistId}/top-tracks?market=US`);
+        let tracks = data?.tracks || [];
+        
+        // Fallback: if no top tracks, fetch tracks from the most recent album
+        if (tracks.length === 0) {
+            console.log(`No top tracks for ${artistId}, fetching from recent albums...`);
+            const albums = await getArtistAlbums(artistId);
+            if (albums.length > 0) {
+                const recentAlbum = albums[0];
+                const albumTracks = await getAlbumTracks(recentAlbum.id);
+                tracks = albumTracks.map(st => ({
+                    ...st,
+                    album: recentAlbum,
+                    source: 'spotify' as const
+                }));
+            }
+        }
+        
+        return tracks;
+    } catch (error) {
+        console.error(`Error in getArtistTopTracks for ${artistId}:`, error);
+        return [];
+    }
 };
 
 export const getArtistAlbums = async (artistId: string): Promise<Album[]> => {
     let allAlbums: Album[] = [];
-    let url = `https://api.spotify.com/v1/artists/${artistId}/albums?include_groups=album,single,compilation&limit=50`;
+    let url = `artists/${artistId}/albums?include_groups=album,single&limit=50`;
     
-    while (url) {
-        const data = await fetchSpotify(url);
-        if (!data) break;
-        allAlbums = allAlbums.concat(data.items);
-        url = data.next;
+    try {
+        const data = await fetchSpotify<{ items: Album[], next: string | null }>(url);
+        if (data) {
+            allAlbums = data.items.map(album => ({
+                ...album,
+                source: 'spotify' as const
+            }));
+        }
+    } catch (error) {
+        console.error("Error fetching artist albums:", error);
     }
     
-    return allAlbums.sort((a, b) => new Date(b.release_date).getTime() - new Date(a.release_date).getTime());
+    return allAlbums;
 };
 
 export const getAlbumTracks = async (albumId: string): Promise<SimplifiedTrack[]> => {
-    const data = await fetchSpotify(`https://api.spotify.com/v1/albums/${albumId}/tracks?limit=50`);
+    const data = await fetchSpotify<{ items: SimplifiedTrack[] }>(`albums/${albumId}/tracks?limit=50`);
     return data?.items || [];
 };

commit 9009e6b0663248e856f2970239a5d7081687a9cd
Author: juanbernal <redimidoxd@gmail.com>
Date:   Thu Feb 26 12:14:31 2026 -0600

    Fix: Reestructuraci├│n a est├índar Vite y correhjhjcci├│n de rutas 404

diff --git a/src/services/spotifyService.ts b/src/services/spotifyService.ts
index c0bf4f2..fbb211d 100644
--- a/src/services/spotifyService.ts
+++ b/src/services/spotifyService.ts
@@ -1,8 +1,8 @@
 
 import type { Album, Artist, Track, SimplifiedTrack } from '../types';
 
-const CLIENT_ID = process.env.SPOTIFY_CLIENT_ID;
-const CLIENT_SECRET = process.env.SPOTIFY_CLIENT_SECRET;
+const CLIENT_ID = process.env.SPOTIFY_CLIENT_ID || (import.meta as any).env?.VITE_SPOTIFY_CLIENT_ID;
+const CLIENT_SECRET = process.env.SPOTIFY_CLIENT_SECRET || (import.meta as any).env?.VITE_SPOTIFY_CLIENT_SECRET;
 
 let accessToken: string | null = null;
 let tokenExpiry: number = 0;
@@ -12,10 +12,14 @@ const getAccessToken = async () => {
         return accessToken;
     }
 
+    console.log("Spotify: Attempting to get access token...");
     if (!CLIENT_ID || !CLIENT_SECRET) {
-        console.error("Spotify credentials missing in environment");
+        console.error("Spotify: Credentials missing. Check SPOTIFY_CLIENT_ID and SPOTIFY_CLIENT_SECRET in environment.");
+        console.log("Spotify: process.env.SPOTIFY_CLIENT_ID is:", process.env.SPOTIFY_CLIENT_ID ? "Defined" : "Undefined");
         return null;
     }
+    
+    console.log(`Spotify: Using Client ID starting with: ${CLIENT_ID.substring(0, 4)}...`);
 
     try {
         const response = await fetch("https://accounts.spotify.com/api/token", {
@@ -27,19 +31,29 @@ const getAccessToken = async () => {
             body: "grant_type=client_credentials",
         });
 
+        if (!response.ok) {
+            const errorData = await response.text();
+            console.error(`Spotify: Token request failed (${response.status}):`, errorData);
+            return null;
+        }
+
         const data = await response.json();
         accessToken = data.access_token;
         tokenExpiry = Date.now() + (data.expires_in * 1000);
+        console.log("Spotify: Access token obtained successfully.");
         return accessToken;
     } catch (error) {
-        console.error("Error getting Spotify access token:", error);
+        console.error("Spotify: Error getting access token (possibly CORS):", error);
         return null;
     }
 };
 
 const fetchSpotify = async (url: string) => {
     const token = await getAccessToken();
-    if (!token) return null;
+    if (!token) {
+        console.error(`Spotify: No token available for request to ${url}`);
+        return null;
+    }
 
     try {
         const response = await fetch(url, {
@@ -47,10 +61,27 @@ const fetchSpotify = async (url: string) => {
                 "Authorization": `Bearer ${token}`,
             },
         });
-        if (!response.ok) throw new Error(`Spotify API error: ${response.status}`);
+        
+        if (response.status === 429) {
+            console.warn("Spotify: Rate limit exceeded. Try again later.");
+            return null;
+        }
+
+        if (!response.ok) {
+            const errorText = await response.text();
+            console.error(`Spotify: API request failed (${response.status}) for ${url}. Error: ${errorText}`);
+            return null;
+        }
+
+        const contentType = response.headers.get("content-type");
+        if (!contentType || !contentType.includes("application/json")) {
+            console.error(`Spotify: Expected JSON response but got ${contentType} from ${url}`);
+            return null;
+        }
+
         return await response.json();
     } catch (error) {
-        console.error(`Error fetching from Spotify (${url}):`, error);
+        console.error(`Spotify: Error fetching from ${url}:`, error);
         return null;
     }
 };

commit 9604a79b8c2d499821e2acd2a1e43f2d499884f9
Author: juanbernal <redimidoxd@gmail.com>
Date:   Thu Feb 26 11:52:51 2026 -0600

    Fix: Reestructuraci├│n a est├índar Vite y correcci├│n43434 de rutas 404

diff --git a/src/services/spotifyService.ts b/src/services/spotifyService.ts
index 49ef720..c0bf4f2 100644
--- a/src/services/spotifyService.ts
+++ b/src/services/spotifyService.ts
@@ -1,55 +1,84 @@
 
 import type { Album, Artist, Track, SimplifiedTrack } from '../types';
 
-interface SpotifyStaticData {
-    artist: Artist;
-    topTracks: Track[];
-    albums: Album[];
-    albumTracks: Record<string, SimplifiedTrack[]>;
-    lastUpdated: string;
-}
-
-let cachedData: SpotifyStaticData | null = null;
-
-const fetchStaticData = async (): Promise<SpotifyStaticData | null> => {
-    if (cachedData) return cachedData;
+const CLIENT_ID = process.env.SPOTIFY_CLIENT_ID;
+const CLIENT_SECRET = process.env.SPOTIFY_CLIENT_SECRET;
+
+let accessToken: string | null = null;
+let tokenExpiry: number = 0;
+
+const getAccessToken = async () => {
+    if (accessToken && Date.now() < tokenExpiry) {
+        return accessToken;
+    }
+
+    if (!CLIENT_ID || !CLIENT_SECRET) {
+        console.error("Spotify credentials missing in environment");
+        return null;
+    }
+
     try {
-        const response = await fetch(`spotify_data.json?t=${Date.now()}`);
-        if (!response.ok) throw new Error("Static data not found");
-        cachedData = await response.json();
-        return cachedData;
+        const response = await fetch("https://accounts.spotify.com/api/token", {
+            method: "POST",
+            headers: {
+                "Content-Type": "application/x-www-form-urlencoded",
+                "Authorization": "Basic " + btoa(CLIENT_ID + ":" + CLIENT_SECRET),
+            },
+            body: "grant_type=client_credentials",
+        });
+
+        const data = await response.json();
+        accessToken = data.access_token;
+        tokenExpiry = Date.now() + (data.expires_in * 1000);
+        return accessToken;
     } catch (error) {
-        console.warn("Could not load spotify_data.json. Using empty fallback.", error);
+        console.error("Error getting Spotify access token:", error);
+        return null;
+    }
+};
+
+const fetchSpotify = async (url: string) => {
+    const token = await getAccessToken();
+    if (!token) return null;
+
+    try {
+        const response = await fetch(url, {
+            headers: {
+                "Authorization": `Bearer ${token}`,
+            },
+        });
+        if (!response.ok) throw new Error(`Spotify API error: ${response.status}`);
+        return await response.json();
+    } catch (error) {
+        console.error(`Error fetching from Spotify (${url}):`, error);
         return null;
     }
 };
 
 export const getArtistDetails = async (artistId: string): Promise<Artist | null> => {
-    const data = await fetchStaticData();
-    if (data && data.artist.id === artistId) return data.artist;
-    
-    // Fallback if ID doesn't match or data not found
-    return null;
+    return await fetchSpotify(`https://api.spotify.com/v1/artists/${artistId}`);
 };
 
 export const getArtistTopTracks = async (artistId: string): Promise<Track[]> => {
-    const data = await fetchStaticData();
-    if (data && data.artist.id === artistId) return data.topTracks;
-    return [];
+    const data = await fetchSpotify(`https://api.spotify.com/v1/artists/${artistId}/top-tracks?market=US`);
+    return data?.tracks || [];
 };
 
 export const getArtistAlbums = async (artistId: string): Promise<Album[]> => {
-    const data = await fetchStaticData();
-    if (!data) return [];
+    let allAlbums: Album[] = [];
+    let url = `https://api.spotify.com/v1/artists/${artistId}/albums?include_groups=album,single,compilation&limit=50`;
+    
+    while (url) {
+        const data = await fetchSpotify(url);
+        if (!data) break;
+        allAlbums = allAlbums.concat(data.items);
+        url = data.next;
+    }
     
-    // Filter albums by artist ID if needed, though they are already combined in the JSON
-    return data.albums.filter(a => a.artists.some(art => art.id === artistId));
+    return allAlbums.sort((a, b) => new Date(b.release_date).getTime() - new Date(a.release_date).getTime());
 };
 
 export const getAlbumTracks = async (albumId: string): Promise<SimplifiedTrack[]> => {
-    const data = await fetchStaticData();
-    if (data && data.albumTracks && data.albumTracks[albumId]) {
-        return data.albumTracks[albumId];
-    }
-    return [];
+    const data = await fetchSpotify(`https://api.spotify.com/v1/albums/${albumId}/tracks?limit=50`);
+    return data?.items || [];
 };

commit 8b40f11729fb6779faee26af120b05693d2fc7c0
Author: juanbernal <redimidoxd@gmail.com>
Date:   Thu Feb 26 11:46:06 2026 -0600

    Fix: Reestructuraci├│n a est├índar Vite y correcci├│n de rutas 404

diff --git a/src/services/spotifyService.ts b/src/services/spotifyService.ts
new file mode 100644
index 0000000..49ef720
--- /dev/null
+++ b/src/services/spotifyService.ts
@@ -0,0 +1,55 @@
+
+import type { Album, Artist, Track, SimplifiedTrack } from '../types';
+
+interface SpotifyStaticData {
+    artist: Artist;
+    topTracks: Track[];
+    albums: Album[];
+    albumTracks: Record<string, SimplifiedTrack[]>;
+    lastUpdated: string;
+}
+
+let cachedData: SpotifyStaticData | null = null;
+
+const fetchStaticData = async (): Promise<SpotifyStaticData | null> => {
+    if (cachedData) return cachedData;
+    try {
+        const response = await fetch(`spotify_data.json?t=${Date.now()}`);
+        if (!response.ok) throw new Error("Static data not found");
+        cachedData = await response.json();
+        return cachedData;
+    } catch (error) {
+        console.warn("Could not load spotify_data.json. Using empty fallback.", error);
+        return null;
+    }
+};
+
+export const getArtistDetails = async (artistId: string): Promise<Artist | null> => {
+    const data = await fetchStaticData();
+    if (data && data.artist.id === artistId) return data.artist;
+    
+    // Fallback if ID doesn't match or data not found
+    return null;
+};
+
+export const getArtistTopTracks = async (artistId: string): Promise<Track[]> => {
+    const data = await fetchStaticData();
+    if (data && data.artist.id === artistId) return data.topTracks;
+    return [];
+};
+
+export const getArtistAlbums = async (artistId: string): Promise<Album[]> => {
+    const data = await fetchStaticData();
+    if (!data) return [];
+    
+    // Filter albums by artist ID if needed, though they are already combined in the JSON
+    return data.albums.filter(a => a.artists.some(art => art.id === artistId));
+};
+
+export const getAlbumTracks = async (albumId: string): Promise<SimplifiedTrack[]> => {
+    const data = await fetchStaticData();
+    if (data && data.albumTracks && data.albumTracks[albumId]) {
+        return data.albumTracks[albumId];
+    }
+    return [];
+};
